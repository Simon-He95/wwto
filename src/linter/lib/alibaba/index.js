const utils=require("../utils/utils"),unsupportedFns=require("./unsupported-fns"),unsupportedTags=require("./unsupported-tags"),unsupportedAttrs=require("./unsupported-attrs"),wxmlLineRules=[e=>{const s="组件阿里小程序未实现";for(let t=0;t<unsupportedTags.length;t++){const u=unsupportedTags[t],r=new RegExp(`<${u}\\s+`);if(e.match(r))return{source:e,rule:[u,s].join("")}}return null}],wxmlFileRules=[(e,s)=>{const t=[];return unsupportedAttrs.forEach(u=>{u.attrs.forEach(r=>{const n=new RegExp(`<${u}[^>]+${r}=`),l=e.match(n);if(l){const n=utils.calcLine(e,l),i=`阿里小程序 ${u.tag} 组件不支持 ${r} 属性`;t.push({path:s,line:n,source:l,rule:i})}})}),t}],wxssFileRules=[],wxssLineRules=[],scriptLineRules=[e=>{const s="方法阿里小程序未实现";for(let t=0;t<unsupportedFns.length;t++){const u=unsupportedFns[t],r=new RegExp(`\\.${u}\\(`);if(e.match(r))return{source:e,rule:[u,s].join("")}}return null}],scriptFileRules=[(e,s)=>{const t=/['"][\w\/.]+['"]/,u=e.match(/require\(([^)]+)\)/);if(u&&!t.test(u[1])){return{line:utils.calcLine(e,u[0]),path:s,source:u[0],rule:"`require`，参数只能是字符串直接量，不能是变量（如：`var path = '/a/b/c'; require(path);`）"}}return null},(e,s)=>{const t=/triggerEvent\(['"]/,u=e.match(/triggerEvent\(([^)]+)\)/);if(u&&!t.test(u[0])){return{line:utils.calcLine(e,u[0]),path:s,source:u[0],rule:"triggerEvent(name, data)`，`name`目前只支持字符串直接量，不支持变量"}}return null}];module.exports={wxmlLineRules:wxmlLineRules,wxmlFileRules:wxmlFileRules,wxssLineRules:wxssLineRules,wxssFileRules:wxssFileRules,scriptLineRules:scriptLineRules,scriptFileRules:scriptFileRules};
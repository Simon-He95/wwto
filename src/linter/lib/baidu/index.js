const utils=require("../utils/utils"),unsupportedFns=require("./unsupported-fns"),unsupportedTags=require("./unsupported-tags"),wxmlLineRules=[e=>{const s="组件百度小程序未实现";for(let u=0;u<unsupportedTags.length;u++){let l=unsupportedTags[u],r=new RegExp("<"+l+"\\s+");if(e.match(r))return{source:e,rule:[l,s].join("")}}return null},e=>{const s=/[^<>(?:]+/,u=e.match(/bind\w+\s*=\s*['"]([^'"]+)['"]/);return u&&!s.test(u[1])?{source:u[0],rule:"bind*={{str}}  `str`只能是函数名（字符串），不能包含函数计算（如：`bindtap=\"flag ? 'fn1' : 'fn2'\"`）"}:null},e=>{const s=/[^<>(?:]+/,u=e.match(/wx:for=['"](.+)['"]/);return u&&!s.test(u[1])?{source:e,rule:"wx:for={{arr}}  `arr`不能包含达式计算（如：`wx:for='{{flag ? arr1 : arr2}}'`）"}:null},e=>{return e.match(/\s+hidden=["'].+['"]/)?{source:e,rule:"wxml不支持`hidden`"}:null}],wxmlFileRules=[(e,s)=>{const u=[];return e.replace(/<[^>]+wx:for=[^>]+wx:if=['"](.+)['"][^>]*>/g,l=>{let r=utils.calcLine(e,l);u.push({path:s,line:r,source:l,rule:"在同一个标签上，`wx:for`和`wx:if`不能同时使用"})}),u}],wxssLineRules=[],wxssFileRules=[],scriptFileRules=[],scriptLineRules=[e=>{const s="方法百度小程序未实现";for(let u=0;u<unsupportedFns.length;u++){let l=unsupportedFns[u],r=new RegExp("\\."+l+"\\(");if(e.match(r))return{source:e,rule:[l,s].join("")}}return null}];module.exports={wxmlFileRules:wxmlFileRules,wxmlLineRules:wxmlLineRules,wxssFileRules:wxssFileRules,wxssLineRules:wxssLineRules,scriptFileRules:scriptFileRules,scriptLineRules:scriptLineRules};
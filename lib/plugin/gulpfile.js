const gulp=require("gulp"),pump=require("pump"),watch=require("gulp-watch"),uglifyES=require("gulp-uglify-es").default,source=["src/**/*.js","!src/converter/**/*.*","!src/linter/**/*.*","!src/adaptor/**/*.*"],UGLIFY_OPTIONS={compress:{}};gulp.task("build",e=>{console.log("开始转换..."),pump([gulp.src(source),uglifyES(UGLIFY_OPTIONS),gulp.dest("lib")],()=>{console.log("转换完成！"),e&&e()})}),gulp.task("debug",gulp.series("build",()=>watch(source,e=>{const u=e.history[0];return console.log("开始压缩：",u),gulp.src(u).pipe(uglifyES(UGLIFY_OPTIONS)).pipe(gulp.dest("lib")).on("end",()=>{console.log("压缩完成：",u)})})));
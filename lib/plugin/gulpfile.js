const gulp=require("gulp"),pump=require("pump"),watch=require("gulp-watch"),uglifyES=require("gulp-uglify-es").default,source=["src/**/*.js","!src/converter/**/*.*","!src/linter/**/*.*","!src/adaptor/**/*.*"],UGLIFY_OPTIONS={compress:{}};gulp.task("debug",["build"],()=>watch(source,u=>{const e=u.history[0];return console.log("开始压缩：",e),gulp.src(e).pipe(uglifyES(UGLIFY_OPTIONS)).pipe(gulp.dest("lib")).on("end",()=>{console.log("压缩完成：",e)})})),gulp.task("build",u=>{console.log("开始转换..."),pump([gulp.src(source),uglifyES(UGLIFY_OPTIONS),gulp.dest("lib")],()=>{console.log("转换完成！"),u&&u()})});
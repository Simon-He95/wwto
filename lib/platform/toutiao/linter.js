const utils=require("../../utils/utils"),commonLint=require("../../utils/linter"),wxmlLineRules=[e=>{const o=e.match(/<(movable-\w+|map|audio|canmera|live-\w+)[^>]*>/);return o?{source:o[0],rule:"不支持组件（如：`movable-area`、`movable-view`、`cover-view`、`cover-image`、`map`、`audio`、`canmera`等）"}:null},e=>{const o=/\.\w+\(/,l=e.match(/wx:(for|if)=['"](.+)['"]/);return l&&o.test(l[0])?{source:l[0],rule:"条件/循环渲染，不能进行函数调用运算（如：`wx:if=\"{{['aa', 'bb'].indexOf('aa')===-1}}\"`）"}:null}],wxmlFileRules=[],jsLineRules=[e=>{const o=e.match(/wx\.onSocketOpen/);return o?{source:o[0],rule:"`websocket`不能使用全局事件（如：`wx.onSocketOpen`）"}:null},e=>{const o=e.match(/wx\.(startRecord|stopRecord)/);return o?{source:o[0],rule:"录音功能没有全局方法（`wx.startRecord`, `wx.stopRecord`）"}:null},e=>{const o=e.match(/wx\.\w+BackgroundAudio/);return o?{source:o[0],rule:"不支持背景音频"}:null},e=>{const o=e.match(/\.selectComponent\(/);return o?{source:o[0],rule:"不支持`selectComponent`，可以通过监听属性的`observer`来实现外部的调用"}:null}],jsFileRules=[];function lint(e={}){const o=e.source||"./src";commonLint(o+"/**/*.wxml",wxmlFileRules,wxmlLineRules),commonLint(o+"/**/*.js",jsFileRules,jsLineRules)}module.exports=lint;